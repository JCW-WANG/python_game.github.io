<!DOCTYPE html>
<html lang="zh-TW">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>ç¶“å…¸é›»å½±è½éŸ³è¾¨ä½ | Movie Soundtrack Quiz</title>
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --bg-color: #121212;
Â  Â  Â  Â  Â  Â  --card-bg: #1e1e1e;
Â  Â  Â  Â  Â  Â  --primary: #e50914; /* Netflix Red */
Â  Â  Â  Â  Â  Â  --accent: #f5c518; /* IMDb Yellow/Gold */
Â  Â  Â  Â  Â  Â  --text: #ffffff;
Â  Â  Â  Â  Â  Â  --text-secondary: #b3b3b3;
Â  Â  Â  Â  Â  Â  --correct: #46d369;
Â  Â  Â  Â  Â  Â  --wrong: #f44336;
Â  Â  Â  Â  }

Â  Â  Â  Â  * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Helvetica Neue', Arial, sans-serif; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  background-color: var(--bg-color);
Â  Â  Â  Â  Â  Â  color: var(--text);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  overflow-x: hidden;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .app-container {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }

Â  Â  Â  Â  .hidden { display: none !important; }

Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  background: var(--primary);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 15px 30px;
Â  Â  Â  Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  Â  Â  Â  border-radius: 50px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: transform 0.2s, box-shadow 0.2s;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn:hover { transform: scale(1.02); box-shadow: 0 0 15px rgba(229, 9, 20, 0.8); }
Â  Â  Â  Â  .btn:disabled { background: #555; cursor: not-allowed; transform: none; box-shadow: none; }

Â  Â  Â  Â  .screen {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.5s ease;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* 1. Start Screen */
Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  font-size: 2.5rem;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  letter-spacing: 2px;
Â  Â  Â  Â  Â  Â  /* å¼·åŒ–è¦–è¦ºï¼šéœ“è™¹å…‰æšˆæ•ˆæœ */
Â  Â  Â  Â  Â  Â  color: var(--accent);
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 5px var(--accent), 0 0 15px rgba(245, 197, 24, 0.5);
Â  Â  Â  Â  }

Â  Â  Â  Â  .subtitle { color: var(--text-secondary); margin-bottom: 30px; font-style: italic; }
Â  Â  Â  Â  .instruction {
Â  Â  Â  Â  Â  Â  background: #222;Â 
Â  Â  Â  Â  Â  Â  padding: 20px;Â 
Â  Â  Â  Â  Â  Â  border-radius: 10px;Â 
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;Â 
Â  Â  Â  Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  Â  Â  Â  line-height: 1.8;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  border-left: 4px solid var(--primary); /* é‚Šæ¡†æ”¹ç”¨ä¸»è‰² */
Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* 2. Game Screen */
Â  Â  Â  Â  .hud {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  Â  Â  color: var(--text);
Â  Â  Â  Â  Â  Â  background: #282828; /* ç¨äº®ä¸€é»çš„èƒŒæ™¯ */
Â  Â  Â  Â  Â  Â  padding: 12px 20px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  border: 1px solid #444;
Â  Â  Â  Â  }
Â  Â  Â  Â  .hud span:last-child { color: var(--accent); }

Â  Â  Â  Â  .visualizer-container {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  margin: 30px auto;
Â  Â  Â  Â  }

Â  Â  Â  Â  .visualizer {
Â  Â  Â  Â  Â  Â  width: 200px; /* è®Šå¤§ */
Â  Â  Â  Â  Â  Â  height: 200px; /* è®Šå¤§ */
Â  Â  Â  Â  Â  Â  background: radial-gradient(circle, #333 10%, #000 70%);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  border: 5px solid #333;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 20px rgba(0,0,0,0.5);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  transition: all 0.5s;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* æ’­æ”¾å‹•ç•«å¼·åŒ–ï¼šæ—‹è½‰ + è„ˆå‹• */
Â  Â  Â  Â  .visualizer.playing {
Â  Â  Â  Â  Â  Â  animation: spin 4s linear infinite, pulse 1.5s infinite alternate;
Â  Â  Â  Â  Â  Â  border-color: var(--primary);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 30px rgba(229, 9, 20, 0.6);
Â  Â  Â  Â  }
Â  Â  Â  Â  .visualizer::after { content: ''; width: 25px; height: 25px; background: var(--bg-color); border-radius: 50%; position: absolute; }
Â  Â  Â  Â  .music-icon { font-size: 4rem; opacity: 0.7; z-index: 1; color: var(--accent); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Loading Spinner Over Visualizer */
Â  Â  Â  Â  .loader {
Â  Â  Â  Â  Â  Â  border: 4px solid rgba(255, 255, 255, 0.3);
Â  Â  Â  Â  Â  Â  border-top: 4px solid var(--accent);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  Â  Â  height: 40px;
Â  Â  Â  Â  Â  Â  animation: spin 1s linear infinite;
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  margin-top: -20px;
Â  Â  Â  Â  Â  Â  margin-left: -20px;
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-text {
Â  Â  Â  Â  Â  Â  height: 24px;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  color: var(--accent);
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .timer-bar {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 10px; /* è®Šç²— */
Â  Â  Â  Â  Â  Â  background: #333;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  margin: 10px 0 25px 0;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }
Â  Â  Â  Â  .timer-fill {
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background: linear-gradient(to right, var(--primary), var(--accent)); /* æ¼¸å±¤æ•ˆæœ */
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  transition: width 1s linear;
Â  Â  Â  Â  }

Â  Â  Â  Â  .options-grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  Â  Â  Â  gap: 12px;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â  .option-btn {
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  border: 2px solid #444; /* é‚Šæ¡†æ›´æ˜é¡¯ */
Â  Â  Â  Â  Â  Â  padding: 18px; /* å…§é‚Šè·å¢å¤§ */
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.3s cubic-bezier(.25,.8,.25,1); /* å¹³æ»‘éæ¸¡ */
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  box-shadow: 0 3px 6px rgba(0,0,0,0.2);
Â  Â  Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  Â  }
Â  Â  Â  Â  .option-btn:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background: #333;
Â  Â  Â  Â  Â  Â  border-color: var(--accent);
Â  Â  Â  Â  Â  Â  transform: translateY(-3px); /* æµ®å‹•æ•ˆæœ */
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 20px rgba(0,0,0,0.4);
Â  Â  Â  Â  }
Â  Â  Â  Â  .option-btn.correct { background: var(--correct); border-color: var(--correct); color: black; font-weight: bold; transform: scale(1.05); }
Â  Â  Â  Â  .option-btn.wrong { background: var(--wrong); border-color: var(--wrong); opacity: 0.6; animation: shake 0.5s; }

Â  Â  Â  Â  /* 3. Result Overlay */
Â  Â  Â  Â  .result-card {
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  padding: 25px;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  border-left: 5px solid var(--primary); /* é‚Šæ¡†æ”¹ç”¨ä¸»è‰² */
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.8);
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.5s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .result-title { font-size: 1.6rem; color: var(--accent); margin-bottom: 5px; }
Â  Â  Â  Â  .result-year { color: #aaa; font-size: 0.95rem; margin-bottom: 15px; display: block; }
Â  Â  Â  Â  .result-desc { font-size: 1rem; line-height: 1.7; color: #ddd; margin-bottom: 20px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* End Screen å¼·åŒ– */
Â  Â  Â  Â  #final-score {
Â  Â  Â  Â  Â  Â  font-size: 6rem;
Â  Â  Â  Â  Â  Â  color: var(--correct);
Â  Â  Â  Â  Â  Â  font-weight: 900;
Â  Â  Â  Â  Â  Â  margin: 20px 0;
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 10px var(--correct), 0 0 30px rgba(70, 211, 105, 0.5);
Â  Â  Â  Â  Â  Â  animation: popIn 0.8s ease-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Keyframes */
Â  Â  Â  Â  @keyframes spin { 100% { transform: rotate(360deg); } }
Â  Â  Â  Â  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
Â  Â  Â  Â  @keyframes pulse {
Â  Â  Â  Â  Â  Â  0% { transform: scale(1); box-shadow: 0 0 15px rgba(229, 9, 20, 0.6); }
Â  Â  Â  Â  Â  Â  100% { transform: scale(1.03); box-shadow: 0 0 40px rgba(229, 9, 20, 0.9); }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes shake {
Â  Â  Â  Â  Â  Â  0%, 100% { transform: translateX(0); }
Â  Â  Â  Â  Â  Â  20%, 60% { transform: translateX(-5px); }
Â  Â  Â  Â  Â  Â  40%, 80% { transform: translateX(5px); }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes popIn {
Â  Â  Â  Â  Â  Â  0% { transform: scale(0.5); opacity: 0; }
Â  Â  Â  Â  Â  Â  80% { transform: scale(1.1); opacity: 1; }
Â  Â  Â  Â  Â  Â  100% { transform: scale(1); }
Â  Â  Â  Â  }

Â  Â  Â  Â  @media (min-width: 600px) {
Â  Â  Â  Â  Â  Â  .options-grid { grid-template-columns: 1fr 1fr; }
Â  Â  Â  Â  Â  Â  h1 { font-size: 3.5rem; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

<div class="app-container">
Â  Â Â 
Â  Â  <div id="start-screen" class="screen">
Â  Â  Â  Â  <div style="font-size: 4rem; margin-bottom: 10px; color: var(--primary);">ğŸ¬</div>
Â  Â  Â  Â  <h1>é›»å½±çŒœè¬å¤§å¸«</h1>
Â  Â  Â  Â  <p class="subtitle">è½é…æ¨‚ â€¢ çŒœé›»å½±</p>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="instruction">
Â  Â  Â  Â  Â  Â  <p>ğŸ§ <b>è«‹é–‹å•ŸéŸ³æ•ˆ</b>ï¼šéƒ¨åˆ†ç€è¦½å™¨éœ€æ‰‹å‹•å…è¨±æ’­æ”¾ã€‚</p>
Â  Â  Â  Â  Â  Â  <p>â±ï¸ <b>é™æ™‚æŒ‘æˆ°</b>ï¼šæ¯é¡Œæœ‰ 30 ç§’ä½œç­”æ™‚é–“ã€‚</p>
Â  Â  Â  Â  Â  Â  <p>ğŸµ <b>è†è½æç¤º</b>ï¼šéŸ³æ¨‚è¼‰å…¥å¾Œè¨ˆæ™‚æ‰æœƒé–‹å§‹ã€‚</p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <button class="btn" id="start-btn">é–‹å§‹éŠæˆ²</button>
Â  Â  </div>

Â  Â  <div id="game-screen" class="screen hidden">
Â  Â  Â  Â  <div class="hud">
Â  Â  Â  Â  Â  Â  <span>ç¬¬ <span id="current-q">1</span>/10 é¡Œ</span>
Â  Â  Â  Â  Â  Â  <span>åˆ†æ•¸: <span id="score">0</span></span>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="visualizer-container">
Â  Â  Â  Â  Â  Â  <div class="visualizer" id="visualizer">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="music-icon">ğŸµ</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="loading-spinner" class="loader hidden"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="status-text" class="status-text">æº–å‚™æ’­æ”¾...</div>

Â  Â  Â  Â  <div class="timer-bar">
Â  Â  Â  Â  Â  Â  <div class="timer-fill" id="timer-fill"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="options-grid" id="options-container">
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="result-section" class="hidden">
Â  Â  Â  Â  Â  Â  <div class="result-card">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="result-title" id="res-title">é›»å½±æ¨™é¡Œ</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-year" id="res-year">1999</span>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="result-desc" id="res-desc">æè¿°...</p>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" id="next-btn" onclick="game.nextQuestion()">ä¸‹ä¸€é¡Œ</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="end-screen" class="screen hidden">
Â  Â  Â  Â  <h1>éŠæˆ²çµæŸ</h1>
Â  Â  Â  Â  <p class="subtitle">ä½ çš„æœ€çµ‚å¾—åˆ†</p>
Â  Â  Â  Â  <div id="final-score">0</div>
Â  Â  Â  Â  <p id="feedback-msg" style="font-size: 1.2rem; margin-bottom: 30px;">...</p>
Â  Â  Â  Â  <button class="btn" onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
Â  Â  </div>

Â  Â  <audio id="bgm-player" preload="auto"></audio>

</div>

<script>

const MOVIE_DATA = [
Â  Â  {
Â  Â  Â  Â  id: 1,
Â  Â  Â  Â  title: "The Godfather (æ•™çˆ¶)",
Â  Â  Â  Â  year: "1972",
Â  Â  Â  Â  desc: "è¬›è¿°1940å¹´ä»£ç´ç´„é»‘æ‰‹é»¨æŸ¯é‡Œæ˜‚å®¶æ—çš„æ•…äº‹ã€‚å°¼è«¾Â·ç¾…å¡”çš„é…æ¨‚å“€å‚·è€Œå„ªç¾ï¼Œå®Œç¾è©®é‡‹äº†å®¶æ—çš„æ‚²åŠ‡å‘½é‹ã€‚",
Â  Â  Â  Â  // âš ï¸ å·²å°‡é€£çµæœ«å°¾ä¿®æ­£ç‚º ?raw=1ï¼Œä»¥å˜—è©¦å–å¾—ç›´æ¥æª”æ¡ˆã€‚
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/lkjvtyebrs86ldetb2zmf/The-Godfather-1972-victoslava-youtube.mp3?rlkey=qfvu8gxznfhy3cdsoec51kqox&raw=1"Â 
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 2,
Â  Â  Â  Â  title: "Star Wars (æ˜Ÿéš›å¤§æˆ°)",
Â  Â  Â  Â  year: "1977",
Â  Â  Â  Â  desc: "å¤ªç©ºæ­ŒåŠ‡å·¨ä½œï¼Œå¹´è¼•çš„è·¯å…‹Â·å¤©è¡Œè€…å°æŠ—é‚ªæƒ¡å¸åœ‹ã€‚ç´„ç¿°Â·å¨å»‰æ–¯çš„äº¤éŸ¿æ¨‚é…æ¨‚æ°£å‹¢ç£…ç¤´ã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/8daria055z63dzo7jej9i/Star-Wars-Music-Poyoko-youtube.mp3?rlkey=78zbfg6wxghvsz7znb6roogtg&raw=1"
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 3,
Â  Â  Â  Â  title: "Casablanca (åŒ—éè«œå½±)",
Â  Â  Â  Â  year: "1942",
Â  Â  Â  Â  desc: "äºŒæˆ°æ™‚æœŸçš„æ‘©æ´›å“¥ï¼Œé…’å§è€é—†ç‘å…‹åœ¨æ„›æƒ…èˆ‡æ­£ç¾©é–“æŠ‰æ“‡ã€‚ã€ŒAs Time Goes Byã€é€™é¦–æ­Œè²«ç©¿å…¨ç‰‡ã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/twusk57y2rh3dth5bnz9n/Casablanca-kuang-Lee-youtube.mp3?rlkey=h79zacik0ahc4a0dxopmrgpr7&raw=1"
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 4,
Â  Â  Â  Â  title: "Gone with the Wind (äº‚ä¸–ä½³äºº)",
Â  Â  Â  Â  year: "1939",
Â  Â  Â  Â  desc: "ç¾åœ‹å—åŒ—æˆ°çˆ­å²è©©ï¼Œå±•ç¾å—æ–¹ç¤¾æœƒçš„å´©æ½°èˆ‡é‡å»ºã€‚å ´é¢å®å¤§ï¼Œæœè£è¯éº—ã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/cg6wnfvpbvhputd9kb7yl/My-Own-True-Love-Nana-Mouskouri-1939-YN-youtube.mp3?rlkey=hjd90uclmbf5lf18e2mjdbgzl&raw=1"
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 5,
Â  Â  Â  Â  title: "The Wizard of Oz (ç¶ é‡ä»™è¹¤)",
Â  Â  Â  Â  year: "1939",
Â  Â  Â  Â  desc: "æ¡ƒæ¨‚çµ²è¢«é¾æ²é¢¨æ²åˆ°å¥§èŒ²åœ‹çš„å¥‡å¹»æ—…ç¨‹ã€‚ã€ŒOver the Rainbowã€æˆç‚ºå½±å²æœ€å‰å¤§çš„é›»å½±æ­Œæ›²ã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/aazwjtn79toj2exbkwm5y/Somewhere-Over-the-Rainbow-The-Wizard-of-Oz-youtube.mp3?rlkey=6h4irhdimqbz0v8uf59cey5ze&raw=1"
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 6,
Â  Â  Â  Â  title: "Titanic (éµé”å°¼è™Ÿ)",
Â  Â  Â  Â  year: "1997",
Â  Â  Â  Â  desc: "çª®ç•«å®¶å‚‘å…‹èˆ‡è²´æ—å°‘å¥³è˜¿çµ²åœ¨æ²‰èˆ¹å‰çš„åˆ»éª¨éŠ˜å¿ƒæ„›æƒ…ã€‚å¸­ç³Â·ç‹„ç¿çš„æ­Œæ›²é¢¨é¡å…¨çƒã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/zjm7x8stg6e8enq73suz5/Titanic-My-Heart-Will-Go-On-Celine-Dion-HD-Film-Tributes-youtube.mp3?rlkey=g6qwmu3pmq8qf8t44ifn3ftaw&raw=1"
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 7,
Â  Â  Â  Â  title: "Jaws (å¤§ç™½é¯Š)",
Â  Â  Â  Â  year: "1975",
Â  Â  Â  Â  desc: "å·¨å¤§é£Ÿäººé¯Šæ”»æ“Šåº¦å‡å°é®ã€‚å…©éŸ³ç¬¦ä¸»é¡Œæ›²è£½é€ äº†æ¥µå¼·çš„ç·Šå¼µæ„Ÿã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/1f5mmkdfnpuxa9zji302s/Main-Title-John-Williams-youtube.mp3?rlkey=ywdsxq9zjza2rh4r435ek9oic&raw=1"
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 8,
Â  Â  Â  Â  title: "Rocky (æ´›åŸº)",
Â  Â  Â  Â  year: "1976",
Â  Â  Â  Â  desc: "ä¸‰æµæ‹³æ“Šæ‰‹æ´›åŸºç²å¾—æŒ‘æˆ°æ‹³ç‹çš„æ©Ÿæœƒã€‚æ¿€æ˜‚é…æ¨‚æ­é…éšæ¢¯å¥”è·‘å ´æ™¯ï¼Œæˆç‚ºç¶“å…¸ã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/euosj0j00pj3z5m2fd9kl/Rocky-OST-Gonna-Fly-Now-Going-The-Distance-The-Final-Bell-youtube.mp3?rlkey=nqh2ds67wly6uzqo0e312uvms&raw=1"
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 9,
Â  Â  Â  Â  title: "E.T. the Extra-Terrestrial (E.T.å¤–æ˜Ÿäºº)",
Â  Â  Â  Â  year: "1982",
Â  Â  Â  Â  desc: "å°ç”·å­©èˆ‡å¤–æ˜Ÿäººå»ºç«‹è·¨è¶Šç¨®æ—çš„å‹èª¼ã€‚é¨è…³è¸è»Šé£›è¶Šå¤©éš›çš„ç•«é¢å……æ»¿ç«¥çœŸã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/p2c1iitbtuq3mcueqenwg/E.T.-Theme-Song-EpicMusicStar-youtube.mp3?rlkey=qx3fs54qylxzizkf46d419as5&raw=1"
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 10,
Â  Â  Â  Â  title: "Raiders of the Lost Ark (æ³•æ«ƒå¥‡å…µ)",
Â  Â  Â  Â  year: "1981",
Â  Â  Â  Â  desc: "å°ç¬¬å®‰ç´Â·ç“Šæ–¯å°‹æ‰¾ç´„æ«ƒçš„å…¨çƒå†’éšªã€‚é€²è¡Œæ›²ä¸»é¡Œæ°£å‹¢ç£…ç¤´ï¼Œæˆç‚ºå†’éšªé›»å½±éŸ³æ¨‚å…¸ç¯„ã€‚",
Â  Â  Â  Â  audioUrl: "https://www.dropbox.com/scl/fi/dwdytpaxtrnsuv80rgmbq/Indiana-Jones-OST-1-4-Movie-Trailer-Ver.-MV-Digital-learning-youtube.mp3?rlkey=s7qrdj4zjf9rfnl48ws8bc1vs&raw=1"
Â  Â  }
];

class GameEngine {
Â  Â  constructor() {
Â  Â  Â  Â  this.score = 0;
Â  Â  Â  Â  this.currentIndex = 0;
Â  Â  Â  Â  this.timer = null;
Â  Â  Â  Â  this.maxTime = 30;
Â  Â  Â  Â  this.timeLeft = this.maxTime;
Â  Â  Â  Â  this.isLoading = false;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // DOM Elements
Â  Â  Â  Â  this.screens = {
Â  Â  Â  Â  Â  Â  start: document.getElementById('start-screen'),
Â  Â  Â  Â  Â  Â  game: document.getElementById('game-screen'),
Â  Â  Â  Â  Â  Â  end: document.getElementById('end-screen')
Â  Â  Â  Â  };
Â  Â  Â  Â  this.audioPlayer = document.getElementById('bgm-player');
Â  Â  Â  Â  this.visualizer = document.getElementById('visualizer');
Â  Â  Â  Â  this.spinner = document.getElementById('loading-spinner');
Â  Â  Â  Â  this.timerFill = document.getElementById('timer-fill');
Â  Â  Â  Â  this.statusText = document.getElementById('status-text');
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Shuffle questions
Â  Â  Â  Â  this.questions = [...MOVIE_DATA].sort(() => Math.random() - 0.5);

Â  Â  Â  Â  // Bind Start Button
Â  Â  Â  Â  document.getElementById('start-btn').addEventListener('click', () => this.start());
Â  Â  }

Â  Â  start() {
Â  Â  Â  Â  // é‡è¦ï¼šåœ¨ä½¿ç”¨è€…é»æ“Šæ™‚å˜—è©¦æ’­æ”¾ä¸€å€‹éœéŸ³/ç©ºçš„éŸ³è¨Šï¼Œè§£é–ç€è¦½å™¨è‡ªå‹•æ’­æ”¾é™åˆ¶
Â  Â  Â  Â  this.audioPlayer.src = ''; // æ¸…ç©ºä¾†æºé¿å…è¼‰å…¥
Â  Â  Â  Â  this.audioPlayer.load();
Â  Â  Â  Â  this.audioPlayer.play().then(() => {
Â  Â  Â  Â  Â  Â  this.audioPlayer.pause();
Â  Â  Â  Â  Â  Â  this.audioPlayer.currentTime = 0;
Â  Â  Â  Â  Â  Â  this.switchScreen('game');
Â  Â  Â  Â  Â  Â  this.loadQuestion();
Â  Â  Â  Â  }).catch(e => {
Â  Â  Â  Â  Â  Â  console.error("Audio unlock failed (user gesture required):", e);
Â  Â  Â  Â  Â  Â  this.switchScreen('game');
Â  Â  Â  Â  Â  Â  this.loadQuestion();
Â  Â  Â  Â  });
Â  Â  }

Â  Â  switchScreen(name) {
Â  Â  Â  Â  Object.values(this.screens).forEach(el => el.classList.add('hidden'));
Â  Â  Â  Â  this.screens[name].classList.remove('hidden');
Â  Â  }

Â  Â  loadQuestion() {
Â  Â  Â  Â  if (this.currentIndex >= this.questions.length) {
Â  Â  Â  Â  Â  Â  this.endGame();
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const currentMovie = this.questions[this.currentIndex];
Â  Â  Â  Â Â 
Â  Â  Â  Â  // UI Reset
Â  Â  Â  Â  document.getElementById('current-q').innerText = this.currentIndex + 1;
Â  Â  Â  Â  document.getElementById('result-section').classList.add('hidden');
Â  Â  Â  Â  document.getElementById('options-container').classList.remove('hidden');
Â  Â  Â  Â  this.visualizer.classList.remove('playing');
Â  Â  Â  Â  this.spinner.classList.remove('hidden'); // Show spinner
Â  Â  Â  Â  this.statusText.innerText = "éŸ³æ¨‚è¼‰å…¥ä¸­...";
Â  Â  Â  Â  this.statusText.style.color = "#ccc";
Â  Â  Â  Â  this.timerFill.style.transition = 'none';
Â  Â  Â  Â  this.timerFill.style.width = '100%';
Â  Â  Â  Â Â 
Â  Â  Â  Â  // åœæ­¢ä¹‹å‰çš„è¨ˆæ™‚èˆ‡éŸ³æ¨‚
Â  Â  Â  Â  if(this.timer) clearInterval(this.timer);
Â  Â  Â  Â  this.audioPlayer.pause();
Â  Â  Â  Â  this.audioPlayer.currentTime = 0;

Â  Â  Â  Â  // è¨­å®šéŸ³æ¨‚ä¾†æº
Â  Â  Â  Â  this.audioPlayer.src = currentMovie.audioUrl;
Â  Â  Â  Â  this.audioPlayer.load(); // é‡æ–°è¼‰å…¥æ–°ä¾†æº
Â  Â  Â  Â  this.audioPlayer.volume = 0.6;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // éŸ³æ¨‚è¼‰å…¥è™•ç†
Â  Â  Â  Â  this.isLoading = true;

Â  Â  Â  Â  // ç¢ºä¿åªé‹è¡Œä¸€æ¬¡
Â  Â  Â  Â  const onCanPlayHandler = () => {
Â  Â  Â  Â  Â  Â  if(this.isLoading) {
Â  Â  Â  Â  Â  Â  Â  Â  this.isLoading = false;
Â  Â  Â  Â  Â  Â  Â  Â  this.spinner.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  this.visualizer.classList.add('playing');
Â  Â  Â  Â  Â  Â  Â  Â  this.statusText.innerText = "ğŸ¶ éŸ³æ¨‚æ’­æ”¾ä¸­... è«‹çŒœæ¸¬ï¼";
Â  Â  Â  Â  Â  Â  Â  Â  this.statusText.style.color = "var(--accent)";
Â  Â  Â  Â  Â  Â  Â  Â  this.audioPlayer.play().catch(e => console.log("Play interrupted (user action needed or file error)", e));
Â  Â  Â  Â  Â  Â  Â  Â  this.startTimer();
Â  Â  Â  Â  Â  Â  Â  Â  this.audioPlayer.removeEventListener('canplay', onCanPlayHandler);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  this.audioPlayer.addEventListener('canplay', onCanPlayHandler);

Â  Â  Â  Â  // éŒ¯èª¤è™•ç†
Â  Â  Â  Â  this.audioPlayer.onerror = () => {
Â  Â  Â  Â  Â  Â  this.isLoading = false;
Â  Â  Â  Â  Â  Â  this.spinner.classList.add('hidden');
Â  Â  Â  Â  Â  Â  this.statusText.innerText = "âš ï¸ éŸ³è¨Šè®€å–å¤±æ•— (è«‹æª¢æŸ¥é€£çµ)";
Â  Â  Â  Â  Â  Â  this.statusText.style.color = "var(--wrong)";
Â  Â  Â  Â  Â  Â  console.error("Audio Load Error for:", currentMovie.title);
Â  Â  Â  Â  Â  Â  // è·³éé€™ä¸€é¡Œ
Â  Â  Â  Â  Â  Â  setTimeout(() => this.nextQuestion(), 3000);
Â  Â  Â  Â  };

Â  Â  Â  Â  // ç”¢ç”Ÿé¸é …
Â  Â  Â  Â  this.generateOptions(currentMovie);
Â  Â  }

Â  Â  generateOptions(correctMovie) {
Â  Â  Â  Â  const container = document.getElementById('options-container');
Â  Â  Â  Â  container.innerHTML = '';

Â  Â  Â  Â  // Get 3 unique wrong answers
Â  Â  Â  Â  let wrongOptions = MOVIE_DATA
Â  Â  Â  Â  Â  Â  .filter(m => m.id !== correctMovie.id)
Â  Â  Â  Â  Â  Â  .sort(() => Math.random() - 0.5)
Â  Â  Â  Â  Â  Â  .slice(0, 3);
Â  Â  Â  Â Â 
Â  Â  Â  Â  let options = [...wrongOptions, correctMovie].sort(() => Math.random() - 0.5);

Â  Â  Â  Â  options.forEach(opt => {
Â  Â  Â  Â  Â  Â  const btn = document.createElement('button');
Â  Â  Â  Â  Â  Â  btn.className = 'option-btn';
Â  Â  Â  Â  Â  Â  btn.innerText = opt.title;
Â  Â  Â  Â  Â  Â  btn.onclick = () => this.checkAnswer(opt, correctMovie, btn);
Â  Â  Â  Â  Â  Â  container.appendChild(btn);
Â  Â  Â  Â  });
Â  Â  }

Â  Â  startTimer() {
Â  Â  Â  Â  this.timeLeft = this.maxTime;
Â  Â  Â  Â  // Restore transition for countdown
Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â this.timerFill.style.transition = 'width 1s linear';
Â  Â  Â  Â  }, 50);

Â  Â  Â  Â  this.timer = setInterval(() => {
Â  Â  Â  Â  Â  Â  this.timeLeft--;
Â  Â  Â  Â  Â  Â  const pct = (this.timeLeft / this.maxTime) * 100;
Â  Â  Â  Â  Â  Â  this.timerFill.style.width = `${pct}%`;

Â  Â  Â  Â  Â  Â  if (this.timeLeft <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  this.handleTimeout();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }, 1000);
Â  Â  }

Â  Â  checkAnswer(selected, correct, btnElement) {
Â  Â  Â  Â  clearInterval(this.timer);
Â  Â  Â  Â  this.audioPlayer.pause();
Â  Â  Â  Â  this.visualizer.classList.remove('playing');
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Disable all buttons
Â  Â  Â  Â  const allBtns = document.querySelectorAll('.option-btn');
Â  Â  Â  Â  allBtns.forEach(b => b.disabled = true);

Â  Â  Â  Â  let isCorrect = selected.id === correct.id;

Â  Â  Â  Â  if (isCorrect) {
Â  Â  Â  Â  Â  Â  btnElement.classList.add('correct');
Â  Â  Â  Â  Â  Â  this.score += 100;
Â  Â  Â  Â  Â  Â  // Bonus for time left (3 points per sec)
Â  Â  Â  Â  Â  Â  this.score += Math.max(0, this.timeLeft * 3); // å¢åŠ æ™‚é–“çå‹µ
Â  Â  Â  Â  Â  Â  this.statusText.innerText = "âœ… ç­”å°äº†ï¼åˆ†æ•¸+100";
Â  Â  Â  Â  Â  Â  this.statusText.style.color = "var(--correct)";
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  btnElement.classList.add('wrong');
Â  Â  Â  Â  Â  Â  // Highlight the correct one
Â  Â  Â  Â  Â  Â  allBtns.forEach(b => {
Â  Â  Â  Â  Â  Â  Â  Â  if(b.innerText === correct.title) b.classList.add('correct');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  this.statusText.innerText = "âŒ ç­”éŒ¯äº†... æ­£ç¢ºç­”æ¡ˆå·²æ¨™ç¤º";
Â  Â  Â  Â  Â  Â  this.statusText.style.color = "var(--wrong)";
Â  Â  Â  Â  }

Â  Â  Â  Â  document.getElementById('score').innerText = this.score;
Â  Â  Â  Â  this.showResult(correct);
Â  Â  }

Â  Â  handleTimeout() {
Â  Â  Â  Â  clearInterval(this.timer);
Â  Â  Â  Â  this.audioPlayer.pause();
Â  Â  Â  Â  this.visualizer.classList.remove('playing');
Â  Â  Â  Â Â 
Â  Â  Â  Â  const correctMovie = this.questions[this.currentIndex];
Â  Â  Â  Â  const allBtns = document.querySelectorAll('.option-btn');
Â  Â  Â  Â  allBtns.forEach(b => {
Â  Â  Â  Â  Â  Â  b.disabled = true;
Â  Â  Â  Â  Â  Â  if(b.innerText === correctMovie.title) b.classList.add('correct');
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  this.statusText.innerText = "â° æ™‚é–“åˆ°ï¼æ²’æœ‰å¾—åˆ†ã€‚";
Â  Â  Â  Â  this.statusText.style.color = "var(--wrong)";
Â  Â  Â  Â  this.showResult(correctMovie);
Â  Â  }

Â  Â  showResult(movie) {
Â  Â  Â  Â  document.getElementById('options-container').classList.add('hidden');
Â  Â  Â  Â  const resDiv = document.getElementById('result-section');
Â  Â  Â  Â  resDiv.classList.remove('hidden');
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.getElementById('res-title').innerText = movie.title;
Â  Â  Â  Â  document.getElementById('res-year').innerText = movie.year;
Â  Â  Â  Â  document.getElementById('res-desc').innerText = movie.desc;
Â  Â  }

Â  Â  nextQuestion() {
Â  Â  Â  Â  this.currentIndex++;
Â  Â  Â  Â  this.loadQuestion();
Â  Â  }

Â  Â  endGame() {
Â  Â  Â  Â  this.switchScreen('end');
Â  Â  Â  Â  document.getElementById('final-score').innerText = this.score;
Â  Â  Â  Â Â 
Â  Â  Â  Â  let msg = "";
Â  Â  Â  Â  if(this.score >= 1200) msg = "ğŸ† å½±å²å¤§å¸«ï¼å¥§æ–¯å¡éä½ è«å±¬ï¼";
Â  Â  Â  Â  else if(this.score >= 800) msg = "ğŸ¬ è³‡æ·±å½±è¿·ï¼Œè¡¨ç¾å‡ºè‰²ï¼";
Â  Â  Â  Â  else if(this.score >= 400) msg = "ğŸ¿ é‚„ä¸éŒ¯ï¼Œå†å¤šçœ‹å¹¾éƒ¨ç¶“å…¸ï¼";
Â  Â  Â  Â  else msg = "ğŸ“º æ²’é—œä¿‚ï¼Œå›å®¶å¤šè¤‡ç¿’ä¸€äº›é›»å½±åŸè²å¸¶å§ï¼";
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.getElementById('feedback-msg').innerText = msg;
Â  Â  }
}

// Init Game
const game = new GameEngine();

</script>
</body>
</html>
