<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>雙人對打遊戲 | Fighting Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1000px;
            width: 100%;
            text-align: center;
        }
        
        header {
            margin-bottom: 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff4d4d, #4d79ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0a0c0;
            margin-bottom: 30px;
        }
        
        .game-area {
            position: relative;
            width: 100%;
            background: rgba(10, 15, 30, 0.7);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
        }
        
        #gameCanvas {
            display: block;
            width: 100%;
            background: #0a0f1e;
        }
        
        .ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            pointer-events: none;
        }
        
        .player-ui {
            background: rgba(0, 0, 0, 0.6);
            padding: 15px;
            border-radius: 10px;
            min-width: 180px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .player-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .health-bar {
            height: 20px;
            background: rgba(255, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .health-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s;
        }
        
        .player1-ui .health-fill {
            background: linear-gradient(90deg, #ff4d4d, #ff9999);
        }
        
        .player2-ui .health-fill {
            background: linear-gradient(90deg, #4d79ff, #99bbff);
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-card {
            background: rgba(20, 25, 45, 0.8);
            padding: 20px;
            border-radius: 10px;
            min-width: 250px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .control-card h3 {
            margin-bottom: 15px;
            color: #ffcc00;
        }
        
        .key {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-family: monospace;
        }
        
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 215, 0, 0.5);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
            display: none;
        }
        
        .game-over h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #ffcc00;
        }
        
        .restart-btn {
            background: linear-gradient(90deg, #ff9900, #ffcc00);
            color: #000;
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
        }
        
        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 204, 0, 0.6);
        }
        
        footer {
            margin-top: 20px;
            color: #a0a0c0;
            font-size: 0.9rem;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-card {
                width: 100%;
                max-width: 350px;
            }
            
            .player-ui {
                min-width: 140px;
                padding: 10px;
            }
            
            .player-name {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .ui-overlay {
                padding: 10px;
                flex-direction: column;
                gap: 10px;
                align-items: center;
            }
            
            .player-ui {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>雙人對打遊戲</h1>
            <p class="subtitle">與朋友一決高下！使用鍵盤控制你的角色</p>
        </header>
        
        <div class="game-area">
            <canvas id="gameCanvas"></canvas>
            
            <div class="ui-overlay">
                <div class="player-ui player1-ui">
                    <div class="player-name">玩家 1</div>
                    <div class="health-bar">
                        <div class="health-fill" id="p1Health" style="width: 100%"></div>
                    </div>
                    <div>生命值: <span id="p1HealthText">100</span></div>
                </div>
                
                <div class="player-ui player2-ui">
                    <div class="player-name">玩家 2</div>
                    <div class="health-bar">
                        <div class="health-fill" id="p2Health" style="width: 100%"></div>
                    </div>
                    <div>生命值: <span id="p2HealthText">100</span></div>
                </div>
            </div>
            
            <div class="game-over" id="gameOver">
                <h2 id="winnerText">玩家 1 獲勝！</h2>
                <p>遊戲結束，點擊按鈕重新開始</p>
                <button class="restart-btn" id="restartBtn">重新開始遊戲</button>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-card">
                <h3>玩家 1 控制</h3>
                <p><span class="key">W</span> 跳躍</p>
                <p><span class="key">A</span> 向左移動</p>
                <p><span class="key">D</span> 向右移動</p>
                <p><span class="key">F</span> 攻擊</p>
            </div>
            
            <div class="control-card">
                <h3>玩家 2 控制</h3>
                <p><span class="key">↑</span> 跳躍</p>
                <p><span class="key">←</span> 向左移動</p>
                <p><span class="key">→</span> 向右移動</p>
                <p><span class="key">R Ctrl</span> 攻擊</p>
            </div>
        </div>
        
        <footer>
            <p>專為 GitHub 設計 | 使用 HTML5 Canvas 和 JavaScript 開發</p>
        </footer>
    </div>

    <script>
        // 遊戲初始化
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameOverScreen = document.getElementById('gameOver');
        const winnerText = document.getElementById('winnerText');
        const restartBtn = document.getElementById('restartBtn');
        const p1Health = document.getElementById('p1Health');
        const p2Health = document.getElementById('p2Health');
        const p1HealthText = document.getElementById('p1HealthText');
        const p2HealthText = document.getElementById('p2HealthText');
        
        // 設定畫布尺寸
        function resizeCanvas() {
            const container = document.querySelector('.game-area');
            canvas.width = container.clientWidth;
            canvas.height = Math.min(600, container.clientWidth * 0.75);
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        // 顏色定義
        const colors = {
            background: '#0a0f1e',
            platform: '#4a5f8c',
            player1: '#ff4d4d',
            player2: '#4d79ff',
            text: '#ffffff'
        };
        
        // 玩家類
        class Player {
            constructor(x, y, color, controls, name) {
                this.x = x;
                this.y = y;
                this.width = 50;
                this.height = 80;
                this.color = color;
                this.speed = 5;
                this.jumpPower = 15;
                this.velY = 0;
                this.isJumping = false;
                this.health = 100;
                this.attackCooldown = 0;
                this.controls = controls;
                this.name = name;
                this.facingRight = name === "Player 1";
                this.attackAnimation = 0;
            }
            
            draw() {
                // 繪製玩家
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
                
                // 繪製攻擊動畫
                if (this.attackAnimation > 0) {
                    ctx.fillStyle = 'rgba(255, 255, 0, 0.5)';
                    const attackX = this.facingRight ? this.x + this.width : this.x - 30;
                    ctx.fillRect(attackX, this.y, 30, this.height);
                    this.attackAnimation--;
                }
                
                // 繪製眼睛（方向指示）
                ctx.fillStyle = '#ffffff';
                const eyeX = this.facingRight ? this.x + this.width - 15 : this.x + 15;
                ctx.beginPath();
                ctx.arc(eyeX, this.y + 25, 8, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#000000';
                ctx.beginPath();
                ctx.arc(eyeX, this.y + 25, 4, 0, Math.PI * 2);
                ctx.fill();
            }
            
            move(keys, platforms) {
                // 水平移動
                if (keys[this.controls.left]) {
                    this.x -= this.speed;
                    this.facingRight = false;
                }
                if (keys[this.controls.right]) {
                    this.x += this.speed;
                    this.facingRight = true;
                }
                
                // 確保玩家不會離開螢幕
                this.x = Math.max(0, Math.min(canvas.width - this.width, this.x));
                
                // 重力
                this.velY += 0.5;
                this.y += this.velY;
                
                // 跳躍
                if (keys[this.controls.up] && !this.isJumping) {
                    this.velY = -this.jumpPower;
                    this.isJumping = true;
                }
                
                // 檢查是否站在平台上
                let onGround = false;
                for (const platform of platforms) {
                    if (this.y + this.height >= platform.y && 
                        this.y + this.height <= platform.y + 10 &&
                        this.x + this.width > platform.x && 
                        this.x < platform.x + platform.width) {
                        this.y = platform.y - this.height;
                        this.velY = 0;
                        this.isJumping = false;
                        onGround = true;
                    }
                }
                
                // 檢查是否站在地面
                if (this.y + this.height >= canvas.height) {
                    this.y = canvas.height - this.height;
                    this.velY = 0;
                    this.isJumping = false;
                    onGround = true;
                }
                
                // 如果不在任何平台上且沒有站在地面上，則標記為跳躍狀態
                if (!onGround && this.velY > 0) {
                    this.isJumping = true;
                }
            }
            
            attack(otherPlayer) {
                if (this.attackCooldown === 0) {
                    // 簡單的攻擊邏輯
                    const attackRange = 70;
                    if (Math.abs(this.x - otherPlayer.x) < attackRange && 
                        Math.abs(this.y - otherPlayer.y) < this.height) {
                        const damage = Math.floor(Math.random() * 11) + 5; // 5-15傷害
                        otherPlayer.health -= damage;
                        this.attackCooldown = 30; // 攻擊冷卻時間
                        this.attackAnimation = 10; // 攻擊動畫幀數
                        return true;
                    }
                }
                return false;
            }
            
            update() {
                if (this.attackCooldown > 0) {
                    this.attackCooldown--;
                }
            }
        }
        
        // 平台類
        class Platform {
            constructor(x, y, width, height) {
                this.x = x;
                this.y = y;
                this.width = width;
                this.height = height;
            }
            
            draw() {
                ctx.fillStyle = colors.platform;
                ctx.fillRect(this.x, this.y, this.width, this.height);
                
                // 平台頂部高光
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.fillRect(this.x, this.y, this.width, 5);
            }
        }
        
        // 創建玩家
        const player1 = new Player(100, 300, colors.player1, {
            up: 'KeyW',
            left: 'KeyA',
            right: 'KeyD',
            attack: 'KeyF'
        }, "Player 1");
        
        const player2 = new Player(600, 300, colors.player2, {
            up: 'ArrowUp',
            left: 'ArrowLeft',
            right: 'ArrowRight',
            attack: 'ControlRight'
        }, "Player 2");
        
        // 創建平台
        const platforms = [
            new Platform(0, canvas.height - 50, canvas.width, 50),  // 地面
            new Platform(200, 400, 200, 20),  // 平台1
            new Platform(400, 300, 200, 20),  // 平台2
            new Platform(200, 200, 200, 20),  // 平台3
        ];
        
        // 鍵盤狀態
        const keys = {};
        
        // 遊戲狀態
        let gameRunning = true;
        
        // 鍵盤事件監聽
        window.addEventListener('keydown', (e) => {
            keys[e.code] = true;
            
            // 攻擊按鍵檢測
            if (gameRunning) {
                if (e.code === player1.controls.attack) {
                    player1.attack(player2);
                }
                if (e.code === player2.controls.attack) {
                    player2.attack(player1);
                }
            }
        });
        
        window.addEventListener('keyup', (e) => {
            keys[e.code] = false;
        });
        
        // 重新開始遊戲
        restartBtn.addEventListener('click', () => {
            player1.health = 100;
            player2.health = 100;
            player1.x = 100;
            player1.y = 300;
            player2.x = 600;
            player2.y = 300;
            player1.velY = 0;
            player2.velY = 0;
            gameRunning = true;
            gameOverScreen.style.display = 'none';
        });
        
        // 遊戲主循環
        function gameLoop() {
            // 清空畫布
            ctx.fillStyle = colors.background;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 繪製平台
            platforms.forEach(platform => platform.draw());
            
            if (gameRunning) {
                // 更新玩家位置
                player1.move(keys, platforms);
                player2.move(keys, platforms);
                
                // 更新玩家狀態
                player1.update();
                player2.update();
                
                // 更新UI
                p1Health.style.width = `${player1.health}%`;
                p2Health.style.width = `${player2.health}%`;
                p1HealthText.textContent = player1.health;
                p2HealthText.textContent = player2.health;
                
                // 檢查遊戲結束條件
                if (player1.health <= 0 || player2.health <= 0) {
                    gameRunning = false;
                    const winner = player1.health <= 0 ? "玩家 2" : "玩家 1";
                    winnerText.textContent = `${winner} 獲勝！`;
                    gameOverScreen.style.display = 'block';
                }
            }
            
            // 繪製玩家
            player1.draw();
            player2.draw();
            
            // 繪製遊戲標題
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.font = '16px Arial';
            ctx.fillText('雙人對打遊戲', 20, 30);
            
            requestAnimationFrame(gameLoop);
        }
        
        // 啟動遊戲循環
        gameLoop();
    </script>
</body>
</html>
